# 問題
全チームによるプレーオフ    
URL:https://onlinejudge.u-aizu.ac.jp/challenges/sources/ICPC/Prelim/1627 

### 問題概要
ある表が与えられます。この表にはすでに勝ち負けの情報が書かれており、まだ試合をしていないチームも存在します。まだ埋まっていな表を適切に埋めることにより、全チームがプレーオフになるような埋め方は何通りあるか求めてください。

---

# 解法
### まずは制約に驚け
この問題を見たときに一番注目したくなるのは、入力の小ささです。3,5,7,9の奇数しか与えられないと言っています。もしこれが複雑な動的計画法で解ける問題であれば、その計算量は大体O(n)やO(n<sup>2</sup>)程度になるはずです。となれば、出題側からすればその制約は100000や1000程度までは増やせるはずです。でも最大9の奇数しか与えられないとなれば、それくらいの規模でしか現実的に解けないことを教えてくれています。  

このように制約が極端に小さい時は、全探索による解法を視野に入れましょう。

### 全探索？
今、全探索をしたいとします。つまり、全ての空きマスに対してwon,もしくはlostが入る可能性があるので、それを全探索してやろうということです。  
便宜上、wonを表す数字を`1`、lostを表す数字を`0`、まだ試合が行われていない数字を`-1`と置くことにします。

方針を確実なものにするため、計算量の見積もりを軽くしてみます。チーム数の最大値は9で、成績表は9*9=81マス存在します。ですが、同じチーム同士の試合は行われないので、埋めるべきマスの最大値は81-9=72となります。（実際には、1試合以上の結果は入力で来るのでもう少し減りますが。）この72マスに対してwon,lostの入れ方を全探索すると、O(2<sup>72</sup>)となります。これが最悪計算量で、2<sup>30</sup>が約10<sup>9</sup>であることに注意すれば、2<sup>72</sup>は10<sup>20</sup>程度でしょうか。C++において現実的な計算量はO(1000000000=10<sup>9</sup>)なので、現実的ではありません。

ここで気づくのが、勝敗のデータは対角線を境界にして、合わせ鏡的な構造になっているということです。チーム1がチーム2に勝つことが分かれば、チーム2はチーム1に負けることは自明です。
もう少し一般化すれば、
* 表のi行j列目に`0`が入ることが分かれば、対角線を挟んだj行i列目には`1`が入ることは自明
* 表のi行j列目に`1`が入ることが分かれば、対角線を挟んだj行i列目には`0`が入ることは自明

となるので、結局全探索するのは対角線で分けられた片側の範囲だけで良いことが分かります。この時のマス目の最大数は36程度で、もう少し頑張れば現実的になりそうです。

### 枝狩り
もう少し計算量を落とすために、枝狩りと呼ばれるものを行います。  
問題文に図示されている表の1行目は、以下のようになっています。
|Team1|Team2|Team3|Team4|Team5|
|:--|:--|:--|:--|:--|
||||lost|lost|

